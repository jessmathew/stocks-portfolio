---
title: 'GR5261 - Statistical Methods in Finance: Stocks Portfolio'
author: 
  - Jess Mathew
  - jm4742
date: "June 4, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tools)
setwd("C:\\Users\\jessm\\OneDrive\\Documents\\Columbia University\\Summer 2019\\GR5261 - Statistical Methods in Finance\\Take Home Project\\AMEX NYSE NASDAQ Stock Histories\\fh_20190420\\sample_history")

multmerge <- function(mypath) {
  filenames<-list.files(path=mypath, full.names=TRUE)
  datalist <- lapply(filenames, function(x){
    stockData <- read.csv(file=x,header=T)[,c("date", "adjclose")]
    colnames(stockData)[2] <- file_path_sans_ext(basename(x))
    return (stockData)
    })
  Reduce(function(x,y) {
    merge(x,y, by.x = "date", by.y = "date", all = TRUE)
    }, datalist)
}

mymergeddata <- multmerge("C:\\Users\\jessm\\OneDrive\\Documents\\Columbia University\\Summer 2019\\GR5261 - Statistical Methods in Finance\\Take Home Project\\AMEX NYSE NASDAQ Stock Histories\\fh_20190420\\sample_history")
head(mymergeddata)
```

